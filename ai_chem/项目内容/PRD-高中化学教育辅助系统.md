# ChemTutor - 高中化学可视化交互解答平台 PRD
## 产品需求文档 (Product Requirements Document)

**版本**: v1.0
**文档日期**: 2026-01-30
**产品名称**: ChemTutor
**产品定位**: 基于AI的高中化学可视化交互式学习辅助平台

---

## 一、产品概述

### 1.1 产品愿景
打造一个"自然语言提问 + AI理解 + 化学可视化 + 交互探索"的高中化学学习平台，让抽象的化学概念（原子结构、化学键、反应机理等）转化为直观、可交互的视觉呈现，帮助学生真正理解化学本质。

### 1.2 核心价值
- **微观可视化**: 将肉眼不可见的原子、分子、化学键等微观世界转化为动态3D可视化
- **反应过程模拟**: 动态展示化学反应过程，观察反应物→过渡态→生成物的变化
- **实验虚拟仿真**: 安全地进行危险或昂贵实验的虚拟操作
- **记忆规律辅助**: 融合艾宾浩斯遗忘曲线、间隔重复等记忆科学模型
- **即时答疑解惑**: 针对化学问题的追问、巩固、评估闭环体验

### 1.3 目标用户
| 用户类型 | 核心需求 | 使用场景 |
|---------|---------|---------|
| **高中生** | 理解抽象概念、记忆反应方程式、实验操作理解 | 课后复习、实验预习、考试备考 |
| **化学教师** | 课堂演示辅助、实验安全展示、动态题库生成 | 课堂教学、作业布置、学情分析 |
| **自学者** | 系统学习化学、知识点梳理、实验模拟 | 技能提升、兴趣学习 |

---

## 二、产品架构

### 2.1 双模式设计

#### 模式一：短时记忆模式（速通模式）
**目标用户**: 考前突击、快速复习、即时答疑
**核心特点**:
- 知识点快速梳理
- 反应方程式记忆强化
- 一站式互动解答（追问）
- 错题针对性巩固

**典型场景**:
```
用户: "明天考试，帮我复习氧化还原反应"
系统: 生成复习清单 → 核心概念可视化 → 典型例题 → 巩固练习
```

#### 模式二：长时记忆模式（深度模式）
**目标用户**: 系统学习、深度理解、长期规划
**核心特点**:
- 知识体系构建（元素周期表→原子结构→化学键→化合物）
- 实验探究式学习
- 艾宾浩斯遗忘曲线复习计划
- 学习进度追踪与掌握度评估

### 2.2 产品演进路线
```
MVP阶段 ──────────► 成长阶段 ──────────► 成熟阶段
   │                      │                      │
   ▼                      ▼                      ▼
化学可视化         实验仿真系统            生态平台
反应动态模拟       AI实验室助手            教师端SaaS
方程式智能生成     VR/AR融合              学校B2B
```

---

## 三、核心功能模块

### 模块一：智能问答与化学可视化 (MVP核心)

#### 1.1 自然语言理解（化学领域）
**功能描述**: 理解化学专业术语和问题意图

**核心能力**:
- 化学学科问题识别（无机/有机/物化/分析）
- 问题类型分类（概念解释、反应判断、计算求解、机理推导、实验操作）
- 化学实体提取（化学式、反应条件、物质状态、计量数）
- 难度评估（高一/高二/高三，基础/进阶/竞赛）

**用户流程示例**:
```
用户输入: "为什么氨气是极性分子但四氯化碳不是？"
    ↓
系统处理: 语言预处理 → 化学实体提取 → 意图识别
    ↓
识别结果:
  - 学科: 物质结构
  - 类型: 分子极性判断
  - 涉及物质: NH3, CCl4
  - 关键概念: 键的极性、分子构型、对称性
  - 难度: 中等
```

#### 1.2 知识检索与方案生成
**技术方案**: Graph RAG + 化学知识图谱

**知识图谱结构**:
```
        [元素周期表]
              │
     ┌────────┼────────┐
     ▼        ▼        ▼
  [原子结构] [化学键] [化合物]
     │        │        │
     └──→ [分子极性] ←──┘
           │
      ┌────┴────┐
      ▼         ▼
    [NH3]     [CCl4]
```

**功能特性**:
- 基于化学知识图谱的语义检索
- 多种讲解方案（如：杂化轨道理论、VSEPR理论、电性原理）
- LLM生成结构化解答方案
- 经典例题复用

**输出示例**:
```json
{
  "讲解策略": "VSEPR理论 + 几何构型分析",
  "步骤": [
    {"step": 1, "内容": "分析中心原子杂化方式（N: sp³, C: sp³）", "可视化": "杂化轨道示意图"},
    {"step": 2, "内容": "判断分子几何构型（NH3: 三角锥形, CCl4: 正四面体）", "可视化": "3D分子模型"},
    {"step": 3, "内容": "分析键的极性（N-H键有极性, C-Cl键有极性）", "可视化": "偶极矩矢量"},
    {"step": 4, "内容": "判断分子极性（NH3不对称→极性, CCl4对称→非极性）", "可视化": "偶极矩合成"}
  ],
  "可视化需求": ["3D分子旋转模型", "偶极矩矢量动画", "电子云分布图"],
  "相关知识点": ["杂化轨道理论", "键的极性", "分子对称性"]
}
```

#### 1.3 动态可视化渲染
**核心功能**: 根据化学问题自动生成交互式可视化内容

**支持的可视化类型**:
| 知识类型 | 可视化方式 | 技术栈 |
|---------|-----------|--------|
| 原子结构/电子排布 | 3D原子模型、电子云动画 | 3Dmol.js, Three.js |
| 分子结构/化学键 | 3D分子模型、键长键角可调 | 3Dmol.js, NGL Viewer |
| 化学反应过程 | 反应动画、过渡态模拟 | Matter.js, Canvas |
| 元素周期表 | 交互式周期表 | D3.js |
| 实验操作 | 虚拟实验仿真 | Unity/Three.js |
| 化学平衡 | 动态平衡示意图 | ECharts, D3.js |
| 电化学 | 电池/电解池3D模型 | Three.js |
| 有机机理 | 反应机理动画 | Canvas, SVG |

**交互特性**:
- **3D分子旋转**: 拖拽旋转、缩放
- **参数调节**:
  - 原子数/原子种类选择
  - 温度、浓度、压强等反应条件
  - 催化剂添加/移除
- **步骤控制**: 播放/暂停/步进
- **视角切换**: 宏观/微观/符号表示
- **元素高亮**: 选中原子/键高亮显示

**前端示例**:
```jsx
function MoleculePolarityViewer({ molecule = 'NH3' }) {
  const [showDipole, setShowDipole] = useState(true);
  const [rotationSpeed, setRotationSpeed] = useState(1);
  const [viewMode, setViewMode] = useState('ball-stick'); // ball-stick / space-filling

  return (
    <div className="molecule-viewer">
      <Viewer3D
        molecule={molecule}
        viewMode={viewMode}
        showDipole={showDipole}
        rotationSpeed={rotationSpeed}
      />
      <ControlPanel>
        <Select label="分子" options={['NH3', 'CCl4', 'H2O', 'CO2']} />
        <Toggle label="显示偶极矩" value={showDipole} onChange={setShowDipole} />
        <Slider label="旋转速度" value={rotationSpeed} onChange={setRotationSpeed} />
        <Radio label="视图模式" options={['球棍模型', '空间填充']} value={viewMode} onChange={setViewMode} />
      </ControlPanel>
    </div>
  );
}
```

#### 1.4 交互控制面板
**功能组件**:

**播放控制**:
- ⏮️ ⏪ ▶️ ⏩ ⏭️ 播放控制
- 播放速度调节（0.5x - 2x）

**化学参数调整**:
- 反应温度: [====●=======] 25°C
- 反应物浓度: [=======●====] 1.0 mol/L
- 催化剂: [添加/移除] →
- pH值: [=======●====] 7.0

**可视化选项**:
- 显示原子序号: [✓]
- 显示孤对电子: [✓]
- 显示键参数: [ ]
- 颜色方案: [CPK配色 ▼]

**探索模式**:
- [切换解释方法 ▼] (VSEPR理论 / 杂化轨道理论 / 电性原理)
- [查看相关概念]
- [生成巩固练习]

**实时反馈**:
- 参数调整后即时重新计算/渲染
- 操作提示与引导
- 异常值警告

---

### 模块二：化学反应模拟器

#### 2.1 反应方程式生成
**功能**: 根据描述自动生成配平的化学方程式

**特性**:
- 自然语言描述→化学方程式
- 自动配平
- 反应条件标注（温度、催化剂等）
- 可逆反应标识

**示例**:
```
用户: "铜和浓硝酸反应"
系统:
  反应方程式: Cu + 4HNO3(浓) = Cu(NO3)2 + 2NO2↑ + 2H2O
  反应类型: 置换反应 + 氧化还原反应
  反应条件: 浓硝酸、常温
  可视化: [播放反应动画] [查看电子转移] [观察实验现象]
```

#### 2.2 反应过程动态模拟
**功能**: 展示反应的微观过程

**展示内容**:
- 反应物分子接近
- 碰撞与有效碰撞
- 过渡态形成
- 旧键断裂、新键形成
- 生成物分离

**可调参数**:
- 温度（影响分子运动速度）
- 浓度（影响碰撞频率）
- 催化剂（降低活化能）

**示例场景**:
```
用户: "展示合成氨反应的过程，并说明温度、压强的影响"
系统:
  1. 生成反应: N2 + 3H2 ⇌ 2NH3
  2. 3D模拟: N2和H2分子运动、碰撞、过渡态、NH3生成
  3. 参数调节面板:
     - 温度滑块：观察温度对分子运动和平衡的影响
     - 压强滑块：观察压强对平衡移动的影响
     - 催化剂开关：观察活化能变化
```

#### 2.3 化学平衡模拟
**功能**: 动态展示化学平衡的建立和移动

**可视化内容**:
- 正逆反应速率变化曲线
- 各物质浓度变化曲线
- 平衡常数K的计算
- 勒夏特列原理演示

**交互示例**:
```
反应: 2SO2 + O2 ⇌ 2SO3 (ΔH < 0)

用户操作: 升高温度
系统响应:
  - 可视化: 平衡向逆反应方向移动
  - 数据: SO3浓度下降，SO2和O2浓度上升
  - 解释: 升温使平衡向吸热反应（逆反应）方向移动
```

---

### 模块三：虚拟实验系统

#### 3.1 实验操作模拟
**功能**: 虚拟进行化学实验操作

**支持的实验类型**:
| 实验类型 | 典型实验 | 特点 |
|---------|---------|------|
| 无机制备 | 氨气制备、氯气制备 | 强调装置连接、气密性检查 |
| 性质探究 | 金属活动性、非金属性对比 | 强调现象观察 |
| 滴定分析 | 酸碱中和滴定、氧化还原滴定 | 强调操作规范、终点判断 |
| 有机合成 | 乙酸乙酯制备、肥皂制作 | 强调反应条件、产物分离 |
| 电化学 | 原电池、电解池 | 强调电极反应、电流方向 |

**交互功能**:
- 拖拽式器材组装
- 试剂添加（倾倒、滴加）
- 加热/冷却操作
- 现象观察（颜色变化、气泡、沉淀等）
- 数据记录与分析

**示例**:
```
实验: 酸碱中和滴定

操作步骤:
1. 组装滴定装置（拖拽滴定管、铁架台、锥形瓶）
2. 润洗滴定管并装液（标准盐酸溶液）
3. 记录初始读数
4. 滴定操作（控制滴速）
5. 观察颜色变化（酚酞指示剂）
6. 判断滴定终点
7. 记录终读数并计算

系统功能:
- 操作指导与纠错
- 现象实时展示
- 数据自动记录
- 错误操作提示（如：未润洗滴定管）
```

#### 3.2 危险实验演示
**功能**: 安全展示危险或不可行的实验

**适用场景**:
- 涉及剧毒物质（氯气、氟气等）
- 易燃易爆反应
- 需要特殊高压/高温条件
- 反应时间过长

**示例**:
```
实验: 氢气在氯气中燃烧

现实限制: 剧毒、危险
虚拟演示:
  - H2分子在Cl2中点燃
  - 观察苍白色火焰
  - 集气瓶口白雾（HCl气体遇水蒸气）
  - 微观: H2 + Cl2 → 2HCl 的分子过程
```

---

### 模块四：对话式学习与知识图谱

#### 4.1 上下文追问
**功能**: 支持基于当前问题的连续追问

**场景示例**:
```
用户: "为什么氨气是极性分子？"
系统: [生成3D分子可视化 + VSEPR理论讲解]

用户: "那氨气为什么容易液化？"
系统: [延续分子间作用力主题，讲解氢键，展示NH3分子间氢键]

用户: "和PH3比谁的熔点高？"
系统: [对比NH3和PH3，强调氢键对熔沸点的影响]
```

**技术特性**:
- 对话历史上下文保持
- 知识关联识别（极性分子→分子间作用力→氢键→熔沸点）
- 难度递进控制

#### 4.2 知识图谱导航
**功能**: 可视化展示化学知识网络，支持知识探索

**知识图谱示例**:
```
        [氮及其化合物]
              │
     ┌────────┼────────┐
     ▼        ▼        ▼
  [N2]     [NH3]     [HNO3]
     │        │        │
     │    ┌───┴───┐    │
     │    ▼       ▼    │
     │  [氨气]   [铵盐] │
     │   │        │     │
     └───┴────────┴─────┘
         │
     [分子结构] [化学性质] [制法] [用途]
```

**交互**:
- 点击节点跳转到相关知识点
- 推荐学习路径（按难度/关联度）
- 前置/后置知识提示
- 知识掌握度可视化

---

### 模块五：智能练习与巩固

#### 5.1 题型生成
**功能**: 基于当前知识点生成多样化练习

**支持的题型**:
| 题型 | 示例 | 考查能力 |
|-----|------|---------|
| 选择题 | 下列物质中属于极性分子的是 | 概念辨析 |
| 填空题 | NH3的电子式为____，空间构型为____ | 基础记忆 |
| 判断题 | 含极性键的分子一定是极性分子 | 概念理解 |
| 推断题 | A、B、C为短周期元素...推断化学式 | 综合推理 |
| 实验题 | 设计实验证明氨气易液化 | 实验设计 |
| 计算题 | 将标准状况下的NH3 560L溶于水... | 化学计算 |

**特性**:
- 知识点标签化
- 难度自适应（根据用户表现调整）
- 错题类型分析（概念错误/计算错误/审题错误）
- 举一反三（生成变式题）

#### 5.2 反应方程式训练
**功能**: 专门针对化学方程式的练习

**训练模式**:
```
1. 看现象写方程式
   "铜片插入硝酸银溶液，观察到铜表面有银白色物质析出"
   → Cu + 2AgNO3 = Cu(NO3)2 + 2Ag

2. 看物质写反应
   "写出NH3与O2催化氧化的反应"
   → 4NH3 + 5O2 ←(催化剂/加热)→ 4NO + 6H2O

3. 离子方程式配平
   "___MnO4- + ___H+ + ___Cl- → ___Mn2+ + ___Cl2↑ + ___H2O"

4. 缺项配平
   "( )KMnO4 + ( )H2O2 + ( )H2SO4 → ( )MnSO4 + ( )K2SO4 + ( )O2↑ + ( )H2O"
```

#### 5.3 知识掌握度评估
**评估维度**:
- 概念理解准确度
- 方程式记忆与书写
- 实验操作规范度
- 计算解题能力
- 推断分析能力
- 追问深度

**输出示例**:
```
知识点: 氨的化学性质
掌握度: 82%
│
├─ 基础记忆 ████████████░░ 90%
├─ 概念理解 ██████████░░░░ 80%
├─ 方程式书写 ████████████░░ 85%
├─ 实验操作 ████████░░░░░░ 70%
└─ 综合应用 ████████░░░░░░ 75%

薄弱点:
  - 实验现象描述不够准确
  - 喷泉实验原理理解不够深入

建议:
  → 复习喷泉实验原理（压强变化）
  → 观看氨气制备实验视频
  → 完成3道氨相关实验题
```

---

### 模块六：学习计划与记忆管理

#### 6.1 知识体系构建
**功能**: 帮助学生建立完整的化学知识体系

**知识框架示例（无机化学）**:
```
[元素化合物知识体系]
│
├─ [钠及其化合物]
│   ├─ Na → Na2O → Na2O2 → NaOH → Na2CO3/NaHCO3
│   ├─ 性质递变规律
│   ├─ 实验制备与检验
│   └─ 用途
│
├─ [氯及其化合物]
│   ├─ Cl2 → HCl → NaCl
│   ├─ 氯气的制备与性质
│   ├─ 氯离子的检验
│   └─ 卤素单质递变
│
└─ [硫及其化合物]
    ├─ S → SO2 → SO3 → H2SO4
    └─ ...
```

**交互方式**:
- 知识树可视化展示
- 点击展开/收起子节点
- 标记已掌握/待学习/困难
- 生成个性化学习路径

#### 6.2 艾宾浩斯遗忘曲线复习
**功能**: 基于遗忘曲线智能安排复习

**复习时间点**:
- 5分钟后、30分钟后、12小时后、1天后、2天后、4天后、7天后、15天后

**实现**:
```
学习新知识 → 记录学习时间 → 计算复习节点 → 到期推送提醒
```

**复习内容**:
- 核心概念回顾
- 方程式默写
- 相关题目练习
- 知识关联梳理

#### 6.3 高考备考计划
**功能**: 针对高考化学的系统复习规划

**规划内容**:
```
【一轮复习】基础梳理（3个月）
├─ 第1周: 基本概念（物质的量、离子反应、氧化还原）
├─ 第2周: 物质结构与元素周期律
├─ 第3周: 化学反应与能量
└─ ...

【二轮复习】专题突破（2个月）
├─ 专题1: 化学实验综合
├─ 专题2: 化学反应原理综合
├─ 专题3: 工业流程分析
└─ ...

【三轮复习】模拟冲刺（1个月）
├─ 真题演练
├─ 错题回顾
└─ 查漏补缺
```

**每日任务**:
- 今日复习内容
- 必背方程式
- 限时训练题
- 复习打卡

---

### 模块七：教师辅助功能（后期延展）

#### 7.1 备课辅助
**功能**:
- 输入教学主题 → 生成教学大纲
- 自动生成可视化教学方案（3D模型、反应动画）
- 推荐经典例题与变式
- 生成板书设计建议

**示例**:
```
教师输入: "氨气的性质（2课时）"

系统输出:
【教学目标】
- 掌握氨的物理性质
- 理解氨的化学性质（与水、酸、氧气反应）
- 了解氨的实验室制法

【教学流程】
1. 导入（5分钟）：氨的用途展示
2. 新课（30分钟）：
   - 氨的物理性质（3D分子模型展示）
   - 喷泉实验演示（虚拟实验）
   - 氨的化学性质（反应动画）
3. 练习（10分钟）：配套练习题
4. 总结（5分钟）：知识梳理

【板书建议】
- 一、氨的物理性质
- 二、氨的化学性质
  1. 与水反应
  2. 与酸反应
  3. 与氧气反应
- 三、氨的实验室制法
```

#### 7.2 动态题库生成
**特性**:
- 按知识点组卷
- 难度分布控制（易:中:难 = 3:5:2）
- 知识点覆盖率统计
- 自定义题目参数
- 导出标准格式（PDF/Word/LaTeX）

#### 7.3 学情分析
**数据可视化**:
- 班级整体掌握度热力图
- 个体学习轨迹
- 薄弱知识点统计
- 错题类型分布
- 学习时长分析

**示例**:
```
【班级学情报告 - 高三(1)班化学】

平均分: 78.5分 | 及格率: 85% | 优秀率: 35%

知识掌握度热力图:
  ██████████░░ 氧化还原反应 92%
  ████████░░░░ 化学平衡 78%
  ████████░░░░ 电化学 76%
  ██████░░░░░░ 有机化学 65%
  ██████░░░░░░ 实验探究 62%

薄弱知识点 Top3:
  1. 有机推断题（正确率 45%）
  2. 实验方案设计（正确率 52%）
  3. 电极反应书写（正确率 58%）

教学建议:
  - 加强有机化合物性质梳理
  - 增加实验设计专题训练
  - 强化电化学基础知识复习
```

---

## 四、MVP范围界定

### 4.1 MVP版本（v1.0）

**学科范围**: 高中化学核心模块

**功能清单**:
- ✅ 自然语言提问（化学专业术语理解）
- ✅ 问题意图识别与分类
- ✅ 化学知识图谱检索
- ✅ 3D分子结构可视化
- ✅ 化学反应过程动画
- ✅ 交互参数调节（温度、浓度等）
- ✅ 简单追问功能
- ✅ 知识点收藏与复习提醒
- ✅ 方程式生成与配平
- ✅ 基础练习题生成

**不包含**:
- ❌ 完整虚拟实验系统（仅包含简单演示）
- ❌ 复杂有机机理动画
- ❌ 教师端功能
- ❌ 移动端APP
- ❌ VR/AR融合

### 4.2 功能优先级

| 优先级 | 功能模块 | 理由 |
|-------|---------|------|
| P0 | 自然语言问答 + 化学可视化 | 核心价值验证 |
| P0 | 3D分子结构展示 | 化学学科特色 |
| P0 | 化学反应过程动画 | 理解反应机理 |
| P1 | 反应方程式生成与配平 | 高频使用场景 |
| P1 | 追问功能 | 提升学习深度 |
| P1 | 出题巩固 | 学习闭环 |
| P2 | 虚拟实验 | 差异化亮点 |
| P2 | 知识图谱导航 | 长期价值 |
| P3 | 教师端 | 商业化延展 |

---

## 五、非功能性需求

### 5.1 性能要求
- 问答响应时间: < 3秒
- 3D可视化渲染: < 2秒
- 页面加载时间: < 1.5秒
- 并发支持: MVP阶段 100 QPS

### 5.2 安全性
- 生成代码沙箱隔离（防止恶意代码执行）
- 用户数据加密存储
- API密钥安全管理
- 输入内容过滤（防止注入攻击）

### 5.3 可用性
- 系统可用性: 99.5%
- 界面简洁直观，高中生可用
- 多浏览器支持（Chrome, Firefox, Safari, Edge）
- 响应式设计（适配平板）

### 5.4 可扩展性
- 模块化架构，便于新增知识领域
- 可视化组件库复用
- 插件式AI模型接入
- 预留物理、生物等学科扩展接口

---

## 六、技术架构

### 6.1 整体架构图
```
┌─────────────────────────────────────────────────────────────────────┐
│                         用户端 (Web前端)                              │
├─────────────────────────────────────────────────────────────────────┤
│  自然语言输入 → 3D可视化区 → 反应控制面板 → 方程式展示 → 历史记录    │
└──────────────────────────────┬──────────────────────────────────────┘
                               │
                               ▼
┌─────────────────────────────────────────────────────────────────────┐
│                         核心处理层                                    │
├─────────────────────────────────────────────────────────────────────┤
│  ┌──────────┐    ┌──────────┐    ┌──────────┐    ┌──────────┐       │
│  │化学NLU   │ →  │知识图谱  │ →  │方案生成  │ →  │代码/动画 │       │
│  │          │    │RAG检索   │    │  LLM     │    │ 生成     │       │
│  └──────────┘    └──────────┘    └──────────┘    └──────────┘       │
└──────────────────────────────┬──────────────────────────────────────┘
                               │
                               ▼
┌─────────────────────────────────────────────────────────────────────┐
│                      化学可视化引擎                                   │
├─────────────────────────────────────────────────────────────────────┤
│  3D分子渲染 | 反应动画 | 方程式生成 | 实验模拟 | 数据图表               │
└─────────────────────────────────────────────────────────────────────┘
```

### 6.2 技术栈选型

#### 前端层
- **框架**: React 18 + TypeScript
- **3D可视化**:
  - 3Dmol.js (分子结构3D展示)
  - Three.js (通用3D场景)
  - NGL Viewer (大分子可视化)
- **2D可视化**:
  - D3.js (数据可视化、知识图谱)
  - ECharts (图表)
- **公式渲染**: KaTeX / MathJax
- **动画**: Framer Motion / GSAP
- **代码沙箱**: iframe + postMessage
- **状态管理**: Zustand / Redux Toolkit

#### 后端层
- **框架**: Python (FastAPI) / Node.js (NestJS)
- **LLM接入**:
  - OpenAI GPT-4 / Anthropic Claude
  - Azure OpenAI (国内部署)
  - 通义千问 / 文心一言（备选）
- **向量数据库**: Pinecone / Weaviate / Milvus
- **图数据库**: Neo4j (化学知识图谱)
- **缓存**: Redis (常见问题缓存)

#### AI层
- **RAG框架**: LangChain / LlamaIndex
- **Graph RAG**: Microsoft GraphRAG
- **Prompt Engineering**: 多阶段提示（化学理解→检索→规划→生成）
- **Fine-tuning**: 化学学科专用微调模型（可选）

#### 化学专用库
- **分子操作**: RDKit (化学信息学)
- **方程式配平**: ChEMBL / 自研算法
- **数据源**: PubChem, ChemSpider (化合物数据库)

---

## 七、数据模型

### 7.1 核心实体

#### User (用户)
```
- user_id: string
- username: string
- email: string
- role: 'student' | 'teacher' | 'admin'
- grade_level: '高一' | '高二' | '高三'
- chemistry_level: number (0-100)
- learning_mode: 'short_term' | 'long_term'
- weak_points: Array<string>
- created_at: timestamp
```

#### Question (问题)
```
- question_id: string
- user_id: string
- content: string (自然语言)
- topic: string (化学主题)
- subtopic: string (子主题)
- question_type: '概念' | '计算' | '反应' | '实验' | '机理'
- difficulty: number (1-5)
- entities: {
    compounds: Array<string>,      // 涉及的化合物
    elements: Array<string>,       // 涉及的元素
    conditions: object,            // 反应条件
  }
- created_at: timestamp
```

#### Answer (解答)
```
- answer_id: string
- question_id: string
- solution_strategy: string
- steps: Array<{
    step: number,
    content: string,
    visualization_type: string,
    visualization_data: object
  }>
- equation: string (化学方程式，如果有)
- explanation: string
- related_topics: Array<string>
- practice_questions: Array<string>
- created_at: timestamp
```

#### ChemicalNode (化学知识节点)
```
- node_id: string
- category: '元素' | '化合物' | '概念' | '反应' | '实验'
- name: string
- formula: string (化学式)
- description: string
- properties: {
    physical: object,  // 物理性质
    chemical: object,  // 化学性质
  }
- prerequisites: Array<string>    // 前置知识
- related_nodes: Array<string>     // 相关节点
- difficulty: number
- visualization_templates: Array<string>
```

#### Reaction (反应)
```
- reaction_id: string
- equation: string           // 配平的方程式
- reactants: Array<{formula, coefficient, state}>
- products: Array<{formula, coefficient, state}>
- conditions: {
    temperature: number,
    pressure: number,
    catalyst: string,
  }
- reaction_type: string      // 化合/分解/置换/复分解
- thermodynamics: {
    delta_H: number,         // 焓变
    delta_S: number,         // 熵变
    delta_G: number,         // 吉布斯自由能变
  }
- kinetics: {
    rate_law: string,
    activation_energy: number,
  }
```

#### UserProgress (用户学习进度)
```
- progress_id: string
- user_id: string
- topic_id: string
- mastery_level: number (0-100)
- last_reviewed: timestamp
- next_review: timestamp
- review_count: number
- equations_mastered: Array<string>
  ```

#### Experiment (虚拟实验)
```
- experiment_id: string
- name: string
- type: '制备' | '性质' | '滴定' | '合成'
- objectives: Array<string>
- equipment: Array<string>
- chemicals: Array<{name, amount, concentration}>
- steps: Array<{
    step: number,
    action: string,
    expected_phenomenon: string,
  }>
- safety_warnings: Array<string>
- visualization_config: object
```

---

## 八、用户体验流程

### 8.1 核心用户旅程

#### 旅程1: 概念理解 - 分子极性
```
1. 用户输入: "为什么氨气是极性分子但四氯化碳不是？"
   ↓
2. 系统识别:
   - 涉及物质: NH3, CCl4
   - 核心概念: 分子极性、键的极性、分子构型
   - 讲解策略: VSEPR理论
   ↓
3. 生成可视化:
   - NH3的3D分子模型（三角锥形，显示偶极矩）
   - CCl4的3D分子模型（正四面体，显示偶极矩抵消）
   ↓
4. 步骤讲解:
   Step 1: 分析中心原子杂化方式
   Step 2: 判断分子几何构型
   Step 3: 分析键的极性
   Step 4: 判断分子极性
   ↓
5. 用户交互:
   - 旋转3D模型观察
   - 显示/隐藏偶极矩矢量
   - 切换视图模式（球棍/空间填充）
   ↓
6. 追问巩固:
   用户: "那水分子呢？"
   系统: [展示H2O的3D模型和极性分析]
```

#### 旅程2: 反应理解 - 合成氨
```
1. 用户输入: "展示合成氨反应的过程和条件"
   ↓
2. 系统生成:
   - 反应方程式: N2 + 3H2 ⇌ 2NH3 (ΔH < 0)
   - 反应类型: 可逆反应、化合反应
   ↓
3. 可视化展示:
   - 宏观: 工业合成氨装置示意图
   - 微观: N2和H2分子碰撞、过渡态、NH3生成动画
   ↓
4. 交互面板:
   - 温度滑块: 调节观察对平衡的影响
   - 压强滑块: 调节观察对平衡的影响
   - 催化剂开关: 观察反应速率变化
   ↓
5. 数据可视化:
   - 平衡移动曲线
   - 浓度-时间曲线
   - 速率-时间曲线
   ↓
6. 巩固练习:
   - 生成3道相关练习题
   - 错题解析
```

#### 旅程3: 考前突击 - 氮族元素
```
1. 用户输入: "明天考试，帮我复习氮及其化合物"
   ↓
2. 系统生成复习计划:
   【知识框架】
   - N2 → NO → NO2 → HNO3
   - NH3 → NH4+ → NH3·H2O
   ↓
3. 逐个知识点复习:
   - 氮气的性质（3D分子模型）
   - 氮的氧化物对比（表格）
   - 氨气的性质与制备（反应动画）
   - 硝酸的强氧化性（实验演示）
   ↓
4. 每个知识点后:
   - 2-3道巩固题
   - 必背方程式
   ↓
5. 完成后生成:
   - 掌握度报告
   - 薄弱点清单
   - 复习建议
```

### 8.2 界面原型要点

#### 主界面布局
```
┌─────────────────────────────────────────────────────┐
│  ChemTutor                         [速通/深度] [用户]│
├─────────────────────────────────────────────────────┤
│                                                      │
│  ┌───────────────────────────────────────────────┐  │
│  │ 请输入你的化学问题...                           │  │
│  │ [为什么氨气是极性分子？]           [提问] 🎤   │  │
│  └───────────────────────────────────────────────┘  │
│                                                      │
│  ┌───────────────────────────────────────────────┐  │
│  │            3D分子可视化区                      │  │
│  │                                                │  │
│  │              🔵 NH3分子模型                    │  │
│  │         (可拖拽旋转/缩放)                      │  │
│  │                                                │  │
│  │         ←→ 偶极矩矢量                          │  │
│  └───────────────────────────────────────────────┘  │
│                                                      │
│  ┌───────────────────────────────────────────────┐  │
│  │ 方程式: NH3 (三角锥形，键角107.3°)             │  │
│  │ VSEPR理论: N有3个成键电子对+1个孤对电子        │  │
│  └───────────────────────────────────────────────┘  │
│                                                      │
│  ┌───────────────────────────────────────────────┐  │
│  │  ⏮️  ⏪  ▶️  ⏩  ⏭️                             │  │
│  │  [显示偶极矩✓] [孤对电子✓] [球棍模型▼]         │  │
│  └───────────────────────────────────────────────┘  │
│                                                      │
│  [追问] [收藏] [出题练习] [相关知识点]                │
└─────────────────────────────────────────────────────┘
```

---

## 九、成功指标 (KPIs)

### 9.1 MVP阶段指标
| 指标 | 目标值 | 测量方式 |
|-----|-------|---------|
| 用户留存率 (7日) | > 40% | 数据分析 |
| 问答准确率 | > 85% | 用户反馈 |
| 方程式生成准确率 | > 90% | 自动检测 |
| 平均响应时间 | < 3秒 | 系统监控 |
| 日活用户 (DAU) | > 100 | 统计分析 |
| 用户满意度 (NPS) | > 50 | 问卷调研 |

### 9.2 核心验证假设
1. **价值假设**: 3D分子可视化能显著提升化学理解效率
   - **验证**: A/B测试（3D可视化 vs 2D图片 vs 文字）
2. **用户假设**: 高中生愿意为即时化学答疑+可视化付费
   - **验证**: 付费转化率调研
3. **增长假设**: 反应动画能帮助理解抽象反应机理
   - **验证**: 反应机理相关题目正确率提升

---

## 十、风险与挑战

### 10.1 技术风险
| 风险 | 影响 | 应对策略 |
|-----|------|---------|
| LLM化学专业回答不准确 | 误导学生 | 化学知识库校验 + 专家审核 |
| 3D渲染性能问题 | 页面卡顿 | 懒加载 + 简化模型 |
| 方程式配平算法错误 | 低质量内容 | 多算法交叉验证 |
| 化合物数据缺失 | 覆盖率不足 | 接入PubChem等数据库 |

### 10.2 产品风险
| 风险 | 应对 |
|-----|------|
| 学生过度依赖AI | 强调辅助定位，限制使用场景 |
| 化学知识库覆盖不足 | 先聚焦核心模块，逐步扩展 |
| 虚拟实验与真实操作差异 | 标注虚拟性质，鼓励真实实验 |
| 同质化竞争 | 强化"化学专业3D可视化"差异化 |

### 10.3 商业风险
| 风险 | 应对 |
|-----|------|
| 获客成本高 | 校园合作 + 教师推荐 |
| 付费意愿低 | Freemium模式 + 高考刚需 |
| LLM API成本过高 | 分层定价 + 常见问题缓存 |

---

## 十一、开发里程碑

### Phase 1: MVP开发 (3个月)
- Week 1-2: 基础架构搭建 + 化学NLU模块
- Week 3-4: 化学知识图谱构建 + RAG检索
- Week 5-6: 3D分子可视化引擎
- Week 7-8: 化学反应动画系统
- Week 9-10: 方程式生成与配平
- Week 11-12: 前端界面 + 集成测试

### Phase 2: 功能完善 (2个月)
- Week 13-14: 追问功能优化
- Week 15-16: 出题巩固系统
- Week 17-18: 简化虚拟实验
- Week 19-20: 用户体验优化

### Phase 3: 正式发布 (1个月)
- Week 21-22: Beta测试 + Bug修复
- Week 23-24: 正式上线 + 运营准备

---

## 十二、附录

### 12.1 高中化学知识体系

#### 必修模块
```
【必修一】
├─ 第一章: 物质及其变化
│   ├─ 物质的分类
│   ├─ 离子反应
│   └─ 氧化还原反应
│
├─ 第二章: 海水中的重要元素
│   ├─ 钠及其化合物
│   ├─ 氯及其化合物
│   └─ 物质的量
│
└─ 第三章: 铁 金属材料
    ├─ 铁及其化合物
    └─ 金属材料

【必修二】
├─ 第一章: 物质结构 元素周期律
│   ├─ 元素周期表
│   ├─ 元素周期律
│   └─ 化学键
│
├─ 第二章: 化学反应与能量
│   ├─ 化学能与热能
│   ├─ 化学能与电能
│   └─ 化学反应速率
│
└─ 第三章: 有机化合物
    ├─ 碳的多样性
    ├─ 烃
    └─ 烃的衍生物
```

#### 选修模块
```
【选择性必修1: 化学反应原理】
├─ 第一章: 化学反应的热效应
├─ 第二章: 化学反应速率与化学平衡
├─ 第三章: 水溶液中的离子平衡
└─ 第四章: 电化学基础

【选择性必修2: 物质结构与性质】
├─ 第一章: 原子结构与性质
├─ 第二章: 分子结构与性质
└─ 第三章: 晶体结构与性质

【选择性必修3: 有机化学基础】
├─ 第一章: 有机化合物的结构特点
├─ 第二章: 烃
├─ 第三章: 烃的衍生物
├─ 第四章: 生物大分子
└─ 第五章: 合成高分子化合物
```

### 12.2 关键术语表
- **RAG (Retrieval-Augmented Generation)**: 检索增强生成
- **Graph RAG**: 基于知识图谱的RAG
- **VSEPR理论**: 价层电子对互斥理论，用于预测分子几何构型
- **杂化轨道理论**: 解释原子轨道如何杂化形成化学键
- **CPK配色**: 原子标准配色方案（C=黑, H=白, O=红, N=蓝等）

### 12.3 参考资源
- **3D分子可视化**: MolView, ChemSpider, NGL Viewer
- **化学教育平台**: PhET Interactive Simulations, Royal Society of Chemistry
- **化学数据库**: PubChem, ChEBI, ChemSpider
- **竞品分析**:
  - NOBOOK虚拟实验
  - ChemDraw（分子绘制）
  - PhET（科学模拟）

### 12.4 文档变更记录
| 版本 | 日期 | 修订人 | 变更说明 |
|-----|------|-------|---------|
| v1.0 | 2026-01-30 | - | 初始版本（高中化学专用） |

---

**文档结束**
